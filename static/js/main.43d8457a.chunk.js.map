{"version":3,"sources":["components.js","About.js","utils.js","Intro.js","AboutMe.js","Friends.js","Images.js","Messages.js","Raw.js","References.js","Profile.js","App.js","constants.js","index.js","sofa.svg","trustroots-tree.svg"],"names":["Section","children","className","Heading","Content","props","CsProfileLink","label","id","href","userId","Anchor","title","Tabs","routes","map","route","count","key","activeClassName","to","About","forwardRef","ref","isDragActive","input","aboutRef","role","aria-hidden","formatDate","date","Date","toLocaleDateString","undefined","year","month","day","stopUploadsFromTriggering","event","stopPropagation","Intro","src","sofa","alt","onClick","preventDefault","current","scrollIntoView","behavior","AboutMe","user","interests","profile","about_me","dangerouslySetInnerHTML","__html","marked","interest","name","media","teach","amazing_thing","surf_reason","offer_hosts","friends","length","friend","parseInt","replace","Images","images","blobUrl","download","Messages","messages","useState","openThread","setOpenThread","thread","console","log","profileIds","user_ids_concatenated","split","filter","threadId","created_at","hasMessages","isThreadOpen","latestMessage","pop","body","profileId","updated_at","Raw","json","data","countReferences","references","experience","reference","ReferencesList","list","creator_id","recipient_id","reference_type","response_body","response_created_at","isFromMe","type","referenceTypeLabel","References","written_references","received_references","exact","path","Profile","fileDate","user_data","window","sessionStorage","clear","first_name","last_name","username","occupation","Friends","target","rel","TrustrootsTree","getJsonFromZip","zip","a","files","relativePath","zipEntry","dir","file","async","jsonString","JSON","parse","getImagesFromZip","includes","imageProcessor","blob","urlCreator","URL","webkitURL","createObjectURL","Promise","all","extractZip","jszip","loadAsync","setCacheValue","value","setItem","error","App","isStorageAvailable","storage","x","removeItem","e","DOMException","code","testStorage","cachedFileDate","getItem","cachedProfile","cachedProfileImages","setProfile","profileImages","setProfileImages","setFileDate","isProcessing","setIsProcessing","createRef","useEffect","stringify","onDrop","useCallback","acceptedFiles","alert","lastModifiedDate","text","jsonProfile","useDropzone","getRootProps","getInputProps","classnames","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.43d8457a.chunk.js","sourcesContent":["import React from 'react'\nimport { NavLink } from \"react-router-dom\";\n\nimport './components.scss';\n\nexport function Section({children}) {\n  return <div className=\"Section\">{children}</div>\n}\n\nexport function Heading({children}) {\n  return <div className=\"Section-heading\">{children}</div>\n}\n\nexport function Content(props) {\n  return <div className=\"Section-content\" {...props}>{props.children}</div>\n}\n\nexport function CsProfileLink(props) {\n  const label = props.children ? props.children : 'Member';\n  return !! props.id\n    ? (\n      <a {...props} href={`https://www.couchsurfing.com/users/${props.id}`}>\n        { props.id === props.userId ? 'You' : label }\n      </a>\n    )\n    : <span {...props}>{label}</span>\n}\n\nexport function Anchor({id}) {\n  return (\n    <a\n      className=\"Anchor\"\n      href={ `#${id}` }\n      id={ id }\n      title=\"Link here\"\n    >#</a>\n  );\n}\n\n\nexport function Tabs({routes}) {\n  return (\n    <ul className=\"Tabs\">\n      { routes.map(({ route, label, count }) => (\n        <li key={route}>\n          <NavLink activeClassName=\"is-active\" to={ route }>\n            { label }\n            { !! count && <span className=\"Tab-count\">{ count }</span> }\n          </NavLink>\n        </li>\n      )) }\n    </ul>\n  );\n}\n","import React, { forwardRef } from 'react'\n\nimport { Anchor } from './components';\nimport './About.css';\n\nconst About = forwardRef(({isDragActive, input, aboutRef}, ref) => {\n  return (\n    <div className=\"App-landing-section About\" id=\"about\" ref={ ref }>\n      <h1>About</h1>\n\n      <div className=\"About-FAQ\">\n        <h3>Why CouchSpinner exists? <Anchor id=\"why-couchspinner-exists\" /></h3>\n        <p>CouchSurfing locked out a significant portion of their community by <a href=\"https://blog.couchsurfing.com/couchsurfing-needs-your-help/\">turning into a paid site overnight</a> on May 14, 2020.</p>\n        <p>You can recover your data from CouchSurfing, but what can you do with it then?</p>\n        <p>With CouchSpinner, you can preview your profile, references, and messages again!</p>\n\n        <h3>How can I export my CouchSurfing profile? <Anchor id=\"how-can-i-export-my-couchsurfing-profile\" /></h3>\n        <p>If you can still access your profile, <a href=\"https://support.couchsurfing.org/hc/en-us/articles/360045738353-Download-your-data\">follow these instructions to download your data</a>.</p>\n        <p>If you cannot access your profile, you can ask for a copy of your data and to delete your account by contacting Couchsurfing Support at <a href=\"mailto:support@couchsurfing.com\">support@couchsurfing.com</a> or through <a href=\"mailto:privacy@couchsurfing.com\">privacy@couchsurfing.com</a>.</p>\n\n        <h3>Do you store my CouchSurfing profile? <Anchor id=\"do-you-store-my-couchsurfing-profile\" /></h3>\n        <p>Nope. Your profile is never uploaded to us â€” we never see it. Everything happens in your browser only. This is completely secure.</p>\n\n        <h3>Who made this? <Anchor id=\"who-made-this\" /></h3>\n        <p>Folks behind <a href=\"https://www.trustroots.org/?ref=couchspinner\">Trustroots.org</a>, a free and community ran hospitality exchange site alternative to CouchSurfing.</p>\n        <p>We built the functionality anyway for Trustroots and wanted to give it away for people who don't want to join Trustroots.</p>\n        <p>We'd love it if you considered joining Trustroots, though! <span role=\"img\" aria-hidden>ðŸ™‚</span></p>\n\n        <h3>What are other alternatives to CouchSurfing? <Anchor id=\"couchsurfing-alternatives\" /></h3>\n        <p>You could check <a href=\"https://www.trustroots.org/?ref=couchspinner\">Trustroots</a>, <a href=\"https://www.bewelcome.org/\">BeWelcome</a>, <a href=\"https://www.warmshowers.org/\">Warmshowers</a> and <a href=\"https://hackercouch.com/\">Hackercouch</a>.</p>\n\n        <h3>Not all my data is here! <Anchor id=\"not-all-my-data-is-here\" /></h3>\n        <p>Could be! Please check the \"raw\" tab of your profile to browser what the file actually contains and what we are showing.</p>\n        <p>The preview doesn't show everything, but also the file from CouchSurfing could be only partial. They've elaborated that <a href=\"https://www.facebook.com/groups/253525915764545/?post_id=274543140329489&comment_id=274552816995188&reply_comment_id=274560876994382\">some of the very old data might've been lost</a>. You should reach out to CouchSurfing for any specifics, though.</p>\n\n        <h3>Is this open-source? <Anchor id=\"is-this-open-source\" /></h3>\n        <p><a href=\"https://github.com/simison/couchspinner\">Yep!</a> Feel free to help out.</p>\n      </div>\n    </div>\n  );\n});\n\nexport default About;\n","/**\n * Give out pretty date\n * @param  {String} date Date as a string\n * @return {String}\n */\nexport function formatDate(date) {\n  return new Date(date).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' });\n}\n\nexport const scrollToRef = ref => ref.current.scrollIntoView({\n  behavior: 'smooth'\n});\n\n/**\n * Test if browser supports sessionStorage or localStorage\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n *\n * @param  {[String]} type Either `sessionStorage` or `localStorage`\n * @return {[Boolean]}\n */\nexport function testStorage(type) {\n    var storage;\n    try {\n      storage = window[type];\n      var x = '__storage_test__';\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    }\n    catch(e) {\n      return e instanceof DOMException && (\n        // everything except Firefox\n        e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n        // acknowledge QuotaExceededError only if there's something already stored\n        (storage && storage.length !== 0);\n    }\n}\n","import React from 'react'\n\nimport './Intro.scss';\nimport { scrollToRef } from './utils';\nimport sofa from './sofa.svg';\n\nconst stopUploadsFromTriggering = event => { event.stopPropagation(); };\n\nfunction Intro({aboutRef}) {\n  return (\n    <div className=\"App-landing-section Intro\">\n      <h1>CouchSpinner</h1>\n      <h2>Preview Couchsurfing profile exports</h2>\n      { /* https://www.flaticon.com/free-icon/sofa_2965901?term=sofa&page=1&position=39 */ }\n      <img src={sofa} className=\"Intro-logo\" alt=\"logo\" />\n      <div className=\"Intro-instructions\">\n        <p>Drop the export file here, or click to select it.</p>\n      </div>\n      <p>\n        <a href=\"#about\" onClick={ event => {\n          stopUploadsFromTriggering(event);\n          event.preventDefault();\n          scrollToRef(aboutRef);\n        }}>\n          Read more\n        </a>\n        <br /><br />\n        <a\n          className=\"Intro-by-link\"\n          onClick={stopUploadsFromTriggering}\n          href=\"https://www.trustroots.org/?ref=couchspinner\"\n        >\n          By Trustroots\n        </a>\n      </p>\n    </div>\n  );\n};\n\nexport default Intro;\n","import marked from 'marked';\nimport React from 'react'\n\nimport { Section, Heading, Content } from './components';\nimport './AboutMe.scss';\n\nfunction AboutMe({user, interests}) {\n  return (\n    <Section>\n      <Heading>About me</Heading>\n      <Content>\n        { user?.profile?.about_me && (\n          <span dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }} />\n        ) }\n        { user?.profile?.about_me && (\n          <span dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }} />\n        ) }\n        { user?.profile?.interests && (\n          <>\n            <p><strong>More about my interests</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.interests) }} />\n            { interests?.interests && (\n              <ul className=\"AboutMe-interests\">\n              { interests.interests.map(interest => (\n                <li key={interest.name}>{interest.name}</li>\n              )) }\n              </ul>\n            ) }\n          </>\n        ) }\n        { user?.profile?.media && (\n          <>\n            <p><strong>My Favorite Music, Movies & Books</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.media) }} />\n          </>\n        ) }\n        { user?.profile?.teach && (\n          <>\n            <p><strong>Teach, Learn, Share</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.teach) }} />\n          </>\n        ) }\n        { user?.profile?.amazing_thing && (\n          <>\n            <p><strong>One Amazing Thing I've Done</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.amazing_thing) }} />\n          </>\n        ) }\n        { user?.profile?.surf_reason && (\n          <>\n            <p><strong>Why I'm on Couchsurfing</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.surf_reason) }} />\n          </>\n        ) }\n        { user?.profile?.offer_hosts && (\n          <>\n            <p><strong>What I Can Share With Hosts</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.offer_hosts) }} />\n          </>\n        ) }\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react'\n\nimport { Section, Heading, Content, CsProfileLink } from './components';\n\nfunction AboutMe({friends}) {\n  return (\n    <Section>\n      <Heading>Friends</Heading>\n      <Content>\n        { friends.length ? (\n          <ul>\n          { friends.map(friend => {\n            const id = parseInt(friend.profile.replace('https://www.couchsurfing.com/users/', ''), 10);\n            return (\n              <li key={id}>\n                <CsProfileLink id={id}>{friend.profile}</CsProfileLink>\n              </li>\n            );\n          }) }\n          </ul>\n        ) : 'No friends. :-(' }\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react'\n\nimport { Content, Section, Heading } from './components';\nimport './Images.css';\n\nfunction Images({images}) {\n  return (\n    <Section>\n      <Heading>Images</Heading>\n      <Content>\n        {\n          images.length\n          ? (\n            images.map(({id, blobUrl}) => (\n              <p key={id}>\n                <a href={blobUrl} download={id}>\n                  <img src={blobUrl} alt=\"\" className=\"Image\" />\n                </a>\n              </p>\n            ))\n          )\n          : <p>You had no images... :-(</p>\n        }\n      </Content>\n    </Section>\n  );\n}\n\nexport default Images;\n","import React, { useState } from 'react'\nimport marked from 'marked';\n\nimport './Messages.scss';\nimport { formatDate } from './utils';\nimport { Section, Heading, Content, CsProfileLink } from './components';\n\nfunction Messages({messages, userId}) {\n  const [openThread, setOpenThread] = useState(false);\n\n  return (\n    <Section>\n      <Heading>Messages</Heading>\n      <Content>\n        { messages.length ? (\n          messages.map(thread => {\n            console.log(thread);\n            // Other profile IDs than your own\n            const profileIds = thread.user_ids_concatenated.split(',').filter(id => id !== userId);\n\n            // Unique ID for message thread\n            const threadId = `${thread?.user_ids_concatenated}-${thread?.created_at}`;\n\n            const hasMessages = !! thread.messages.length;\n            const isThreadOpen = openThread === threadId;\n            const latestMessage = thread.messages.pop()?.body;\n\n            return (\n              <div className=\"Message\" key={threadId}>\n                <div className=\"Message-meta\">\n                  { profileIds.map(profileId => (\n                    <CsProfileLink\n                      id={profileId}\n                      key={profileId}\n                    />\n                  )) }\n                  { thread?.updated_at && (\n                    <span className=\"Message-date\">{formatDate(thread.updated_at)}</span>\n                  ) }\n                </div>\n                { hasMessages && isThreadOpen && (\n                  <div\n                    className=\"Message-thread\"\n                    dangerouslySetInnerHTML={{ __html: marked(latestMessage) }}\n                  />\n                ) }\n                { hasMessages && !isThreadOpen && (\n                  <>\n                    { latestMessage && <div\n                      className=\"Message-preview\"\n                      dangerouslySetInnerHTML={{ __html: marked(latestMessage) }}\n                    /> }\n                    <button className=\"Message-read\" onClick={ setOpenThread(threadId) }>\n                      Read all\n                    </button>\n                  </>\n                ) }\n\n                { !hasMessages && <p className=\"Message-thread\">Empty message.</p> }\n              </div>\n            );\n          })\n        ) : 'No messages. :-(' }\n      </Content>\n    </Section>\n  );\n}\n\nexport default Messages;\n","import React from 'react'\nimport JsonTree from 'react-json-tree';\n\nimport { Section, Heading } from './components';\n\nfunction Raw({json}) {\n  return (\n    <Section>\n      <Heading>Raw profile export</Heading>\n      <JsonTree data={json} />\n    </Section>\n  );\n}\n\nexport default Raw;\n","import React from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport marked from 'marked';\n\nimport './References.scss';\nimport { formatDate } from './utils';\nimport { Section, Heading, Content, CsProfileLink, Tabs } from './components';\n\n/**\n * Count how many certain type references there are in array\n *\n * @param  {Array} references Array of references\n * @param  {String} experience \"positive\", \"neutral\" or \"negative\"\n * @return {Int} Total count\n */\nfunction countReferences(references, experience) {\n  if (!references || references.length === 0) {\n    return 0;\n  }\n\n  return references.filter((reference) => reference.experience === experience).length;\n}\n\nfunction referenceTypeLabel(type, isFromMe) {\n  switch (type) {\n    case 'surf':\n      return isFromMe ? 'To surfer' : 'From surfer';\n    case 'host':\n      return isFromMe ? 'To host' : 'From host';\n    default:\n      return isFromMe ? 'To member' : 'From member';\n  }\n}\n\nfunction ReferencesList({list, userId}) {\n  return list.map((reference) => {\n    const {\n      body,\n      created_at,\n      creator_id,\n      experience,\n      recipient_id,\n      reference_type,\n      response_body,\n      response_created_at,\n    } = reference;\n    const isFromMe = creator_id === userId;\n    const profileId = isFromMe ? recipient_id : creator_id;\n\n    return (\n      <div\n        className=\"Profile-reference\"\n        key={ `${creator_id}-${recipient_id}-${created_at}` }\n      >\n        <p className=\"Profile-reference-meta\">\n          { reference_type && (\n            <CsProfileLink className=\"Profile-reference-type\" id={profileId}>\n              { referenceTypeLabel(reference_type, isFromMe) }\n            </CsProfileLink>\n          ) }\n          { experience && (\n            <strong className={`Profile-reference-experience Profile-reference-experience-${experience}`}>\n              â˜… {(experience)}\n            </strong>\n          ) }\n          { created_at && (\n            <span className=\"Profile-reference-date\">\n              { formatDate(created_at) }\n            </span>\n          ) }\n        </p>\n        { body && (\n          <p>\n            <span dangerouslySetInnerHTML={{ __html: marked(body) }} />\n          </p>\n        ) }\n        { response_body && (\n          <div className=\"Profile-reference-response\">\n            <p>\n              <strong>Response</strong>\n              { response_created_at && (\n                <span className=\"Profile-reference-date\">\n                  { ` ${formatDate(response_created_at)}` }\n                </span>\n              ) }\n            </p>\n            <p>\n              <span dangerouslySetInnerHTML={{ __html: marked(response_body) }} />\n            </p>\n          </div>\n        ) }\n      </div>\n    );\n  });\n}\n\nfunction References({references, userId}) {\n  return (\n    <Router>\n      <Section>\n        <Heading>References</Heading>\n        <Content>\n          <p>\n            { references?.written_references?.length\n              ? (\n                <>\n                  <strong>{ `${references.written_references.length} written: ` }</strong>\n                  { `${countReferences(references.written_references, 'positive')} positive, ` }\n                  { `${countReferences(references.written_references, 'neutral')} neutral, and ` }\n                  { `${countReferences(references.written_references, 'negative')} negative.` }\n                </>\n              )\n              : `You didn't write references`\n            }\n          </p>\n          <p>\n            { references?.received_references?.length\n              ? (\n                <>\n                  <strong>{ `${references.received_references.length} received: ` }</strong>\n                  { `${countReferences(references.received_references, 'positive')} positive, ` }\n                  { `${countReferences(references.received_references, 'neutral')} neutral, and ` }\n                  { `${countReferences(references.received_references, 'negative')} negative.` }\n                </>\n              )\n              : `You didn't receive references`\n            }\n          </p>\n\n          <Tabs routes={ [\n            { route: '/references', label: 'Received references' },\n            { route: '/references/written', label: 'Written references' },\n          ] } />\n\n          <Switch>\n            <Route exact path=\"/references\">\n              <h3>Received references</h3>\n              <ReferencesList userId={userId} list={references?.received_references ?? []} />\n            </Route>\n            <Route path=\"/references/written\">\n              <h3>Written references</h3>\n              <ReferencesList userId={userId} list={references?.written_references ?? []} />\n            </Route>\n          </Switch>\n        </Content>\n      </Section>\n    </Router>\n  );\n}\n\nexport default References;\n","import React from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nimport './Profile.scss';\nimport { formatDate } from './utils';\nimport { Section, CsProfileLink, Tabs } from './components';\nimport AboutMe from './AboutMe';\nimport Friends from './Friends';\nimport Images from './Images';\nimport Messages from './Messages';\nimport Raw from './Raw';\nimport References from './References';\nimport TrustrootsTree from './trustroots-tree.svg';\n\nfunction Profile({profile, images, fileDate}) {\n  const { user_data: user, interests, references, friends, messages } = profile;\n\n  const referencesCount = (references?.written_references?.length ?? 0) + (references?.received_references?.length ?? 0);\n  const friendsCount = friends?.friends?.length ?? 0;\n  // const messagesCount = messages?.messages?.length ?? 0;\n  const imagesCount = images?.length ?? 0;\n  const routes = [\n    { route: '/', label: 'About me' },\n    { route: '/references', label: 'References', count: referencesCount },\n    { route: '/friends', label: 'Friends', count: friendsCount },\n    // { route: '/messages', label: 'Messages', count: messagesCount },\n    { route: '/images', label: 'Images', count: imagesCount },\n    { route: '/raw', label: 'Raw' }\n  ];\n\n  return (\n    <Router>\n      <div className=\"Profile\">\n        <div className=\"Profile-header\">\n          <p>\n            <em>\n              <CsProfileLink id={user?.id}>Your Couchsurfing.com profile</CsProfileLink>\n              { fileDate && ` as of ${ formatDate(fileDate) }` }\n            </em>\n            <a\n              href=\"/\"\n              className=\"Profile-clear\"\n              onClick={ () => window.sessionStorage.clear() }\n            >\n              Clear out the profile\n            </a>\n          </p>\n          <h1>\n            { user?.profile?.first_name && `${user.profile.first_name} ` }\n            { user?.profile?.last_name && `${user.profile.last_name} ` }\n            { user?.username && `(${user.username})` }\n          </h1>\n          { user?.profile?.occupation && <h3>{ user.profile.occupation }</h3> }\n        </div>\n\n        <Section>\n          <Tabs routes={ routes } />\n        </Section>\n\n        <Switch>\n          <Route exact path=\"/\">\n            <AboutMe user={ user } interests={ interests } />\n          </Route>\n          <Route path=\"/references\">\n            <References references={ references } userId={ user?.id } />\n          </Route>\n          <Route path=\"/friends\">\n            <Friends friends={ friends?.friends || [] } />\n          </Route>\n          <Route path=\"/messages\">\n            <Messages messages={ messages?.messages || [] } userId={ user?.id } />\n          </Route>\n          <Route path=\"/images\">\n            <Images images={ images } />\n          </Route>\n          <Route path=\"/raw\">\n            <Raw json={ profile } />\n          </Route>\n        </Switch>\n\n        <div className=\"promo\">\n          <a href=\"https://www.trustroots.org/?ref=couchspinner\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <img src={TrustrootsTree} className=\"tr-logo\" alt=\"Trustroots\" /><br />\n            Join Trustroots.org<br />\n            Travellers hospitality community.\n          </a>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default Profile;\n","import React, {useCallback, useState, useEffect, createRef} from 'react';\nimport {useDropzone} from 'react-dropzone';\nimport jszip from 'jszip';\nimport classnames from 'classnames';\n\nimport './App.scss';\nimport About from './About';\nimport Intro from './Intro';\nimport Profile from './Profile';\nimport { testStorage } from './utils';\nimport { STORAGE_PREFIX } from './constants';\n// import example from './example-profile.json';\nconst EXAMPLE_PROFILE = false;\n\nasync function getJsonFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return !zipEntry.dir && zipEntry.name.split('.').pop() === 'json';\n  });\n\n  if (!files.length) {\n    return false;\n  }\n\n  const jsonString = await zip.file(files[0].name).async('string');\n\n  try {\n    const json = JSON.parse(jsonString);\n    return json;\n  } catch {\n    return false;\n  }\n}\n\nasync function getImagesFromZip(zip) {\n  const files =  zip.filter((relativePath, zipEntry) => {\n    return !zipEntry.dir && ['jpg', 'gif', 'png'].includes(zipEntry.name.split('.').pop());\n  });\n\n  const imageProcessor = files.map(async (file) => {\n    const blob = await zip.file(file.name).async('blob');\n    const urlCreator = window.URL || window.webkitURL;\n    const blobUrl = urlCreator.createObjectURL(blob);\n\n    return {\n      blobUrl,\n      id: file.name,\n    };\n  });\n\n  const images = await Promise.all(imageProcessor);\n\n  return images;\n}\n\nasync function extractZip(file) {\n  const zip = await jszip.loadAsync(file);\n  const json = await getJsonFromZip(zip);\n  const images = await getImagesFromZip(zip);\n\n  return {\n    json,\n    images,\n  };\n}\n\nfunction setCacheValue(key, value) {\n  try {\n    window.sessionStorage.setItem(`${STORAGE_PREFIX}_${key}`, value);\n  } catch(error) {\n    console.error(error);\n  }\n}\n\nfunction App() {\n  const isStorageAvailable = testStorage('sessionStorage');\n\n  // Re-hydrade previous cache\n  const cachedFileDate = isStorageAvailable && window.sessionStorage.getItem(`${STORAGE_PREFIX}_file_date`);\n  const cachedProfile = isStorageAvailable && JSON.parse(window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile`));\n  const cachedProfileImages = isStorageAvailable && JSON.parse(window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile_images`));\n\n  const [profile, setProfile] = useState(cachedProfile || EXAMPLE_PROFILE);\n  const [profileImages, setProfileImages] = useState(cachedProfileImages || []);\n  const [fileDate, setFileDate] = useState(cachedFileDate || false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const ref = createRef();\n\n  // Store for the browser session\n  useEffect(() => {\n    if(isStorageAvailable) {\n      setCacheValue('file_date', fileDate);\n      setCacheValue('profile_images', JSON.stringify(profileImages));\n      setCacheValue('profile', JSON.stringify(profile));\n    }\n  }, [isStorageAvailable, profile, profileImages, fileDate]);\n\n  // On uploading file(s)\n  const onDrop = useCallback(async acceptedFiles => {\n    setIsProcessing(true);\n\n    if (acceptedFiles.length !== 1) {\n      setIsProcessing(false);\n      return alert('Just one file please.');\n    }\n\n    const file = acceptedFiles[0];\n\n    if (!['application/zip', 'application/json'].includes(file.type)) {\n      setIsProcessing(false);\n      return alert('Please drop either the zip file or json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"');\n    }\n\n    setFileDate(file.lastModifiedDate);\n\n    if (file.type === 'application/zip') {\n      const { json, images } = await extractZip(file);\n      setProfile(json);\n      setProfileImages(images);\n    } else if (file.type === 'application/json') {\n      const jsonProfile = await file.text();\n      try {\n        const json = JSON.parse(jsonProfile)\n        setProfile(json);\n      } catch {\n        alert('File is little too funky for us to understand... ðŸ˜¥');\n      }\n    }\n\n    setIsProcessing(false);\n  }, []);\n\n  const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop});\n\n  return (\n    <div className={ classnames( 'App', { 'is-processing': isProcessing } ) }>\n      { profile\n        ? <Profile profile={ profile } images={ profileImages } fileDate={ fileDate } />\n        : (\n          <>\n            <div className={ classnames( 'drop-container', { 'is-dropping': isDragActive } ) } {...getRootProps()}>\n              <input {...getInputProps() } />\n              <Intro aboutRef={ ref }/>\n            </div>\n            <About ref={ ref }/>\n          </>\n        )\n      }\n    </div>\n  );\n}\n\nexport default App;\n","export const STORAGE_PREFIX = 'couchspinner';\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/sofa.ba454e2c.svg\";","module.exports = __webpack_public_path__ + \"static/media/trustroots-tree.19b96bca.svg\";"],"sourceRoot":""}