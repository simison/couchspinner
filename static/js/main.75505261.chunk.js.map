{"version":3,"sources":["sofa.svg","trustroots-tree.svg","utils.js","About.js","Intro.js","AboutMe.js","Friends.js","Images.js","Raw.js","Profile.js","App.js","constants.js","index.js","components.js"],"names":["module","exports","formatDate","date","dateString","replace","formattedDate","Date","toLocaleDateString","undefined","year","month","day","scrollToElementById","event","stopPropagation","preventDefault","hash","target","el","document","getElementById","window","history","pushState","scrollIntoView","behavior","testStorage","type","storage","x","setItem","removeItem","e","DOMException","code","name","length","FaqHeading","children","id","className","href","onClick","title","About","isDragActive","input","role","aria-hidden","Intro","src","sofa","alt","AboutMe","user","interests","profile","about_me","dangerouslySetInnerHTML","__html","marked","map","interest","key","media","teach","amazing_thing","surf_reason","offer_hosts","friends","names","friend","parseInt","Images","images","blobUrl","download","Raw","json","data","Messages","lazy","References","Profile","fileDate","user_data","references","messages","routes","route","label","count","written_references","received_references","first_name","last_name","username","occupation","sessionStorage","clear","error","Sentry","console","rel","exact","path","fallback","userId","TrustrootsTree","getJsonFromZip","zip","a","files","filter","relativePath","zipEntry","dir","split","pop","file","async","jsonString","JSON","parse","getImagesFromZip","includes","imageProcessor","blob","urlCreator","URL","webkitURL","createObjectURL","Promise","all","extractZip","jszip","loadAsync","getNamesFromJson","Map","collectName","visit","person","surfer","host","displayName","display_name","set","couch_visits","host_couch_visits","forEach","surfer_couch_visits","setCacheValue","value","readBlobFile","text","resolve","reject","fr","FileReader","onload","result","readAsText","scrollTop","body","documentElement","App","isStorageAvailable","cachedFileDate","cachedNames","cachedProfile","cachedProfileImages","getItem","loadFromCache","useState","setProfile","profileImages","setProfileImages","setNames","setFileDate","isProcessing","setIsProcessing","useEffect","stringify","onDrop","useCallback","acceptedFiles","alert","lastModifiedDate","toString","jsonProfile","useDropzone","getRootProps","getInputProps","classnames","dsn","ReactDOM","render","StrictMode","Section","Heading","Content","props","Loading","CsProfileLink","CsProfileName","append","get","Tabs","activeClassName","to"],"mappings":"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","file":"static/js/main.75505261.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sofa.ba454e2c.svg\";","module.exports = __webpack_public_path__ + \"static/media/trustroots-tree.19b96bca.svg\";","/**\n * Give out pretty date\n *\n * @param  {String|Date object} date Date as a string or Date object\n * @return {String}\n */\nexport function formatDate(date) {\n  if (!date) {\n    return date;\n  }\n\n  let dateString;\n\n  // Dates on CS exports are in format \"2007-01-11 22:29:44 UTC\"\n  if (typeof date !== 'object') {\n    dateString = date.replace(' UTC', '');\n  }\n\n  const formattedDate = new Date(dateString).toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n\n  return formattedDate && formattedDate !== 'Invalid Date'\n    ? formattedDate\n    : date;\n}\n\nexport const scrollToElementById = event => {\n  event.stopPropagation();\n  event.preventDefault();\n  const hash = event?.target?.hash;\n  if (hash) {\n    const el = document.getElementById(hash.replace('#', ''));\n    if (el) {\n      window.history.pushState({}, '', hash);\n      el.scrollIntoView({\n        behavior: 'smooth',\n      });\n    }\n  }\n};\n\n/**\n * Test if browser supports sessionStorage or localStorage\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n *\n * @param  {[String]} type Either `sessionStorage` or `localStorage`\n * @return {[Boolean]}\n */\nexport function testStorage(type) {\n  var storage;\n  try {\n    storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return (\n      e instanceof DOMException &&\n      // everything except Firefox\n      (e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage &&\n      storage.length !== 0\n    );\n  }\n}\n","import React from 'react';\n\nimport { scrollToElementById } from './utils';\nimport './About.css';\n\nfunction FaqHeading({ children, id }) {\n  return (\n    <h3 id={id}>\n      <a\n        className=\"Anchor\"\n        href={`#${id}`}\n        onClick={scrollToElementById}\n        title=\"Link here\"\n      >\n        #\n      </a>\n      {children}\n    </h3>\n  );\n}\n\nfunction About({ isDragActive, input }) {\n  return (\n    <div className=\"App-landing-section About\" id=\"about\">\n      <h1>About</h1>\n\n      <div className=\"About-FAQ\">\n        <FaqHeading id=\"how-can-i-export-my-couchsurfing-profile\">\n          How can I export my CouchSurfing profile?{' '}\n        </FaqHeading>\n        <p>\n          If you can still access your profile,{' '}\n          <a href=\"https://support.couchsurfing.org/hc/en-us/articles/360045738353-Download-your-data\">\n            follow these instructions to download your data\n          </a>\n          .\n        </p>\n        <p>\n          If you cannot access your profile, you can ask for a copy of your data\n          and to delete your account by contacting Couchsurfing Support at{' '}\n          <a href=\"mailto:support@couchsurfing.com\">support@couchsurfing.com</a>{' '}\n          or through{' '}\n          <a href=\"mailto:privacy@couchsurfing.com\">privacy@couchsurfing.com</a>\n          .\n        </p>\n\n        <FaqHeading id=\"why-couchspinner-exists\">\n          Why CouchSpinner exists?\n        </FaqHeading>\n        <p>\n          CouchSurfing locked out a significant portion of their community by{' '}\n          <a href=\"https://blog.couchsurfing.com/couchsurfing-needs-your-help/\">\n            turning into a paid site overnight\n          </a>{' '}\n          on May 14, 2020.\n        </p>\n        <p>\n          You can recover your data from CouchSurfing, but what can you do with\n          it then?\n        </p>\n        <p>\n          With CouchSpinner, you can preview your profile, references, and\n          messages again!\n        </p>\n\n        <FaqHeading id=\"who-made-this\">Who made this?</FaqHeading>\n        <p>\n          Folks behind{' '}\n          <a href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=faq\">\n            Trustroots.org\n          </a>\n          , a free and community ran hospitality exchange site you can use\n          instead of CouchSurfing.\n        </p>\n        <p>\n          We built the functionality anyway for Trustroots and wanted to give it\n          away for everyone.\n        </p>\n        <p>\n          We'd love it if you would also join Trustroots, of course!{' '}\n          <span role=\"img\" aria-hidden>\n            ðŸ™‚\n          </span>\n        </p>\n\n        <FaqHeading id=\"do-you-store-my-couchsurfing-profile\">\n          Do you store my CouchSurfing profile?{' '}\n        </FaqHeading>\n        <p>\n          Nope. Your profile is never uploaded to us â€” we never see it.\n          Everything happens in your browser only. This is completely secure.\n        </p>\n\n        <FaqHeading id=\"it-did-not-work\">It didn't work!</FaqHeading>\n        <p>\n          Oh no!{' '}\n          <a href=\"https://couchspinner.wordpress.com/\">Please get in touch</a>{' '}\n          with Mikael to see if we can help.\n        </p>\n\n        <FaqHeading id=\"couchsurfing-alternatives\">\n          What are other alternatives to CouchSurfing?\n        </FaqHeading>\n        <p>\n          You could check{' '}\n          <a href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=faq\">\n            Trustroots\n          </a>\n          , <a href=\"https://www.bewelcome.org/\">BeWelcome</a>,{' '}\n          <a href=\"https://www.warmshowers.org/\">Warmshowers</a> and{' '}\n          <a href=\"https://hackercouch.com/\">Hackercouch</a>.\n        </p>\n\n        <FaqHeading id=\"i-see-only-some-names\">\n          I see only some names, but not everyone?\n        </FaqHeading>\n        <p>\n          Most of the Couchsurfing export doesn't contain names of other\n          profiles, only user IDs. There are a few names available from \"couch\n          requests\", which then we can show elsewhere too.\n        </p>\n\n        <FaqHeading id=\"not-all-my-data-is-here\">\n          Not all my data is here!\n        </FaqHeading>\n        <p>\n          Could be! Please check the \"raw\" tab of your profile to browser what\n          the file actually contains and what we are showing.\n        </p>\n        <p>\n          The preview doesn't show everything, but also the file from\n          CouchSurfing could be only partial. They've elaborated that{' '}\n          <a href=\"https://www.facebook.com/groups/253525915764545/?post_id=274543140329489&comment_id=274552816995188&reply_comment_id=274560876994382\">\n            some of the very old data might've been lost\n          </a>\n          . You should reach out to CouchSurfing for any specifics, though.\n        </p>\n\n        <FaqHeading id=\"is-this-open-source\">Is this open-source?</FaqHeading>\n        <p>\n          <a href=\"https://github.com/simison/couchspinner\">Yep!</a> Feel free\n          to help out.\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default About;\n","import React from 'react';\n\nimport './Intro.scss';\nimport { scrollToElementById } from './utils';\nimport sofa from './sofa.svg';\n\nfunction Intro() {\n  return (\n    <div className=\"App-landing-section Intro\">\n      <h1>CouchSpinner</h1>\n      <h2>\n        Preview Couchsurfing profile export files.{' '}\n        <a href=\"#about\" onClick={scrollToElementById}>\n          Read moreâ€¦\n        </a>\n      </h2>\n      {/* https://www.flaticon.com/free-icon/sofa_2965901?term=sofa&page=1&position=39 */}\n      <img src={sofa} className=\"Intro-logo\" alt=\"logo\" />\n      <button className=\"Intro-instructions\">\n        Drop the file here,\n        <br />\n        or click to select it.\n      </button>\n      <p>\n        <a\n          href=\"#how-can-i-export-my-couchsurfing-profile\"\n          onClick={scrollToElementById}\n        >\n          How do I get CouchSurfing profile export file?\n        </a>\n        <br />\n        <br />\n        <a\n          className=\"Intro-by-link\"\n          onClick={event => event.stopPropagation()}\n          href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=intro\"\n        >\n          By <span>Trustroots.org</span>\n        </a>\n      </p>\n    </div>\n  );\n}\n\nexport default Intro;\n","import marked from 'marked';\nimport React from 'react';\n\nimport { Section, Heading, Content } from './components';\nimport './AboutMe.scss';\n\nfunction AboutMe({ user, interests }) {\n  return (\n    <Section>\n      <Heading>About me</Heading>\n      <Content>\n        {user?.profile?.about_me && (\n          <span\n            dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }}\n          />\n        )}\n        {user?.profile?.about_me && (\n          <span\n            dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }}\n          />\n        )}\n        {user?.profile?.interests && (\n          <>\n            <p>\n              <strong>More about my interests</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.interests),\n              }}\n            />\n            {interests?.interests && (\n              <ul className=\"AboutMe-interests\">\n                {interests.interests.map(interest => (\n                  <li key={interest.name}>{interest.name}</li>\n                ))}\n              </ul>\n            )}\n          </>\n        )}\n        {user?.profile?.media && (\n          <>\n            <p>\n              <strong>My Favorite Music, Movies & Books</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{ __html: marked(user.profile.media) }}\n            />\n          </>\n        )}\n        {user?.profile?.teach && (\n          <>\n            <p>\n              <strong>Teach, Learn, Share</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{ __html: marked(user.profile.teach) }}\n            />\n          </>\n        )}\n        {user?.profile?.amazing_thing && (\n          <>\n            <p>\n              <strong>One Amazing Thing I've Done</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.amazing_thing),\n              }}\n            />\n          </>\n        )}\n        {user?.profile?.surf_reason && (\n          <>\n            <p>\n              <strong>Why I'm on Couchsurfing</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.surf_reason),\n              }}\n            />\n          </>\n        )}\n        {user?.profile?.offer_hosts && (\n          <>\n            <p>\n              <strong>What I Can Share With Hosts</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.offer_hosts),\n              }}\n            />\n          </>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react';\n\nimport { Section, Heading, Content, CsProfileName } from './components';\nimport './Friends.scss';\n\nfunction AboutMe({ friends, names }) {\n  return (\n    <Section>\n      <Heading>Friends</Heading>\n      <Content>\n        {friends.length ? (\n          <ul className=\"Friendist\">\n            {friends.map(friend => {\n              const id = parseInt(\n                friend.profile.replace(\n                  'https://www.couchsurfing.com/users/',\n                  '',\n                ),\n                10,\n              );\n              return (\n                <li key={id}>\n                  <CsProfileName\n                    names={names}\n                    id={id}\n                    alt={friend.profile.replace('https://www.', '')}\n                  />\n                </li>\n              );\n            })}\n          </ul>\n        ) : (\n          'No friends. :-('\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react';\n\nimport { Content, Section, Heading } from './components';\nimport './Images.css';\n\nfunction Images({ images }) {\n  return (\n    <Section>\n      <Heading>Images</Heading>\n      <Content>\n        {images.length ? (\n          images.map(({ id, blobUrl }) => (\n            <p key={id}>\n              <a href={blobUrl} download={id}>\n                <img src={blobUrl} alt=\"\" className=\"Image\" />\n              </a>\n            </p>\n          ))\n        ) : (\n          <p>You had no imagesâ€¦ :-(</p>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default Images;\n","import React from 'react';\nimport JsonTree from 'react-json-tree';\n\nimport { Section, Heading } from './components';\n\nfunction Raw({ json }) {\n  return (\n    <Section>\n      <Heading>Raw profile export</Heading>\n      <JsonTree data={json} />\n    </Section>\n  );\n}\n\nexport default Raw;\n","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport * as Sentry from '@sentry/browser';\nimport React, { Suspense, lazy } from 'react';\n\nimport './Profile.scss';\nimport { formatDate } from './utils';\nimport { Section, CsProfileLink, Tabs, Loading } from './components';\nimport AboutMe from './AboutMe';\nimport Friends from './Friends';\nimport Images from './Images';\nimport Raw from './Raw';\nimport TrustrootsTree from './trustroots-tree.svg';\n\n// Slow rendering elements\nconst Messages = lazy(() => import('./Messages'));\nconst References = lazy(() => import('./References'));\n\nfunction Profile({ fileDate, images, names, profile }) {\n  const { user_data: user, interests, references, friends, messages } = profile;\n\n  const referencesCount =\n    (references?.written_references?.length ?? 0) +\n    (references?.received_references?.length ?? 0);\n  const friendsCount = friends?.friends?.length ?? 0;\n  const messagesCount = messages?.messages?.length ?? 0;\n  const imagesCount = images?.length ?? 0;\n  const routes = [\n    { route: '/', label: 'About me' },\n    { route: '/references', label: 'References', count: referencesCount },\n    { route: '/friends', label: 'Friends', count: friendsCount },\n    { route: '/messages', label: 'Messages', count: messagesCount },\n    { route: '/images', label: 'Images', count: imagesCount },\n    { route: '/raw', label: 'Raw' },\n  ];\n\n  const clearSessionStorage = () => {\n    try {\n      window.sessionStorage.clear();\n    } catch (error) {\n      Sentry.captureException(error);\n      console.error(error);\n    }\n  };\n\n  return (\n    <Router>\n      <div className=\"Profile\">\n        <div className=\"Profile-header\">\n          <div>\n            <em>\n              <CsProfileLink id={user?.id}>\n                Your Couchsurfing.com profile\n              </CsProfileLink>\n              {fileDate && ` as of ${formatDate(fileDate)}`}\n            </em>\n            <h1>\n              {user?.profile?.first_name && `${user.profile.first_name} `}\n              {user?.profile?.last_name && `${user.profile.last_name} `}\n              {user?.username && `(${user.username})`}\n            </h1>\n            {user?.profile?.occupation && <h3>{user.profile.occupation}</h3>}\n          </div>\n          <div className=\"Profile-buttons\">\n            <a href=\"/\" className=\"Profile-clear\" onClick={clearSessionStorage}>\n              Clear out the profile\n            </a>\n            <a\n              href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=header\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Sign up at Trustroots.org\n            </a>\n          </div>\n        </div>\n\n        <Section>\n          <Tabs routes={routes} />\n        </Section>\n\n        <Switch>\n          <Route exact path=\"/\">\n            <AboutMe user={user} interests={interests} />\n          </Route>\n          <Route path=\"/references\">\n            <Suspense fallback={<Loading>References</Loading>}>\n              <References\n                names={names}\n                references={references}\n                userId={user?.id}\n              />\n            </Suspense>\n          </Route>\n          <Route path=\"/friends\">\n            <Friends names={names} friends={friends?.friends || []} />\n          </Route>\n          <Route path=\"/messages\">\n            <Suspense fallback={<Loading>Messages</Loading>}>\n              <Messages\n                messages={messages?.messages || []}\n                names={names}\n                userId={user?.id}\n              />\n            </Suspense>\n          </Route>\n          <Route path=\"/images\">\n            <Images images={images} />\n          </Route>\n          <Route path=\"/raw\">\n            <Raw json={profile} />\n          </Route>\n        </Switch>\n\n        <div className=\"promo\">\n          <a\n            href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=footer\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <img src={TrustrootsTree} className=\"tr-logo\" alt=\"Trustroots\" />\n            <br />\n            Join Trustroots.org\n            <br />\n            Travellers hospitality community.\n          </a>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default Profile;\n","import { useDropzone } from 'react-dropzone';\nimport * as Sentry from '@sentry/browser';\nimport classnames from 'classnames';\nimport jszip from 'jszip';\nimport React, { useCallback, useState, useEffect } from 'react';\n\nimport './App.scss';\nimport About from './About';\nimport Intro from './Intro';\nimport Profile from './Profile';\nimport { testStorage } from './utils';\nimport { STORAGE_PREFIX } from './constants';\n// import example from './example-profile.json';\nconst EXAMPLE_PROFILE = '';\n\nasync function getJsonFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return !zipEntry.dir && zipEntry.name.split('.').pop() === 'json';\n  });\n\n  if (!files.length) {\n    return false;\n  }\n\n  const jsonString = await zip.file(files[0].name).async('string');\n\n  try {\n    const json = JSON.parse(jsonString);\n    return json;\n  } catch (error) {\n    Sentry.captureException(error);\n    return false;\n  }\n}\n\nasync function getImagesFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return (\n      !zipEntry.dir &&\n      ['jpg', 'gif', 'png'].includes(zipEntry.name.split('.').pop())\n    );\n  });\n\n  const imageProcessor = files.map(async file => {\n    const blob = await zip.file(file.name).async('blob');\n    const urlCreator = window.URL || window.webkitURL;\n    const blobUrl = urlCreator.createObjectURL(blob);\n\n    return {\n      blobUrl,\n      id: file.name,\n    };\n  });\n\n  const images = await Promise.all(imageProcessor);\n\n  return images;\n}\n\nasync function extractZip(file) {\n  const zip = await jszip.loadAsync(file);\n  const json = await getJsonFromZip(zip);\n  const images = await getImagesFromZip(zip);\n\n  return {\n    images,\n    json,\n  };\n}\n\nfunction getNamesFromJson(json) {\n  const names = new Map();\n\n  const collectName = visit => {\n    const person = visit?.surfer || visit?.host || {};\n    const username = person?.username;\n    const id = person?.profile?.id;\n    const displayName = person?.profile?.display_name;\n    names.set(id, { displayName, username });\n  };\n\n  if (json?.couch_visits?.host_couch_visits) {\n    json.couch_visits.host_couch_visits.forEach(collectName);\n  }\n\n  if (json?.couch_visits?.surfer_couch_visits) {\n    json.couch_visits.surfer_couch_visits.forEach(collectName);\n  }\n\n  return names;\n}\n\nfunction setCacheValue(key, value) {\n  try {\n    window.sessionStorage.setItem(`${STORAGE_PREFIX}_${key}`, value);\n  } catch (error) {\n    Sentry.captureException(error);\n    console.error(`Saving ${key} in cache failed:`, error);\n  }\n}\n\n/**\n * Read file from Blob or File entry\n * @param  {[File|Blob]}\n * @return {[String]} Text contents of the File\n */\nfunction readBlobFile(file) {\n  // Browser supports Blob.text(), all good!\n  // https://developer.mozilla.org/en-US/docs/Web/API/Blob/text\n  if (typeof file.text === 'function') {\n    return file.text();\n  }\n\n  // Namely Safari needs this\n  // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsText\n  // https://stackoverflow.com/a/46568146\n  return new Promise((resolve, reject) => {\n    var fr = new FileReader();\n    fr.onload = () => {\n      resolve(fr.result);\n    };\n    fr.readAsText(file);\n  });\n}\n\n/**\n * Load previously cached items\n * @return {[Object]}\n */\nfunction loadFromCache() {\n  let cachedFileDate;\n  let cachedNames;\n  let cachedProfile;\n  let cachedProfileImages;\n  try {\n    cachedFileDate = window.sessionStorage.getItem(\n      `${STORAGE_PREFIX}_file_date`,\n    );\n    cachedProfile = JSON.parse(\n      window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile`),\n    );\n    cachedProfileImages = JSON.parse(\n      window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile_images`),\n    );\n\n    if (cachedProfile) {\n      cachedNames = getNamesFromJson(cachedProfile);\n    }\n  } catch (error) {\n    Sentry.captureException(error);\n    console.error(error);\n  }\n\n  return {\n    cachedFileDate,\n    cachedNames,\n    cachedProfile,\n    cachedProfileImages,\n  };\n}\n\nfunction scrollTop() {\n  document.body.scrollTop = 0; // For Safari\n  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\n}\n\nfunction App() {\n  const isStorageAvailable = testStorage('sessionStorage');\n\n  const {\n    cachedFileDate,\n    cachedNames,\n    cachedProfile,\n    cachedProfileImages,\n  } = isStorageAvailable ? loadFromCache() : {};\n\n  const [profile, setProfile] = useState(cachedProfile || EXAMPLE_PROFILE);\n  const [profileImages, setProfileImages] = useState(cachedProfileImages || []);\n  const [names, setNames] = useState(cachedNames || new Map());\n  const [fileDate, setFileDate] = useState(cachedFileDate || '');\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Store for the browser session â€” gets cleared out when closing tab but not on page refresh\n  useEffect(() => {\n    if (isStorageAvailable) {\n      setCacheValue('file_date', fileDate);\n      setCacheValue('profile_images', JSON.stringify(profileImages));\n      setCacheValue('profile', JSON.stringify(profile));\n    }\n  }, [isStorageAvailable, profile, profileImages, fileDate]);\n\n  // On uploading file(s)\n  const onDrop = useCallback(async acceptedFiles => {\n    setIsProcessing(true);\n\n    if (!acceptedFiles || acceptedFiles.length === 0) {\n      setIsProcessing(false);\n      return alert('No files? ðŸ˜¥');\n    }\n\n    if (acceptedFiles.length !== 1) {\n      setIsProcessing(false);\n      return alert('Just one file please.');\n    }\n\n    const file = acceptedFiles[0];\n\n    if (!['application/zip', 'application/json'].includes(file.type)) {\n      setIsProcessing(false);\n      return alert(\n        'Please drop either the zip file or json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"',\n      );\n    }\n\n    if (file.lastModifiedDate) {\n      setFileDate(file.lastModifiedDate.toString());\n    }\n\n    if (file.type === 'application/zip') {\n      const { json, images } = await extractZip(file);\n      if (!json) {\n        setIsProcessing(false);\n        return alert(\n          'Please drop a zip file which contains the profile json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"',\n        );\n      }\n\n      const names = getNamesFromJson(json);\n      setProfile(json);\n      setNames(names);\n      setProfileImages(images);\n      scrollTop();\n    } else if (file.type === 'application/json') {\n      const jsonProfile = await readBlobFile(file);\n\n      try {\n        const json = JSON.parse(jsonProfile);\n        const names = getNamesFromJson(json);\n        setProfile(json);\n        setNames(names);\n        scrollTop();\n      } catch (error) {\n        Sentry.captureException(error);\n        console.error(error);\n        alert(\n          'File is little too funky for us to understandâ€¦  ðŸ˜¥\\n\\nMake sure you uploaded correct export file (it should be .json or .zip file).\\n\\nIf problem persists, feel free to get in touch with Mikael (https://mikaelkorpela.fi/#contact).',\n        );\n      }\n    }\n\n    setIsProcessing(false);\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  return (\n    <div className={classnames('App', { 'is-processing': isProcessing })}>\n      {profile ? (\n        <Profile\n          fileDate={fileDate}\n          images={profileImages}\n          names={names}\n          profile={profile}\n        />\n      ) : (\n        <>\n          <div\n            className={classnames('drop-container', {\n              'is-dropping': isDragActive,\n            })}\n            {...getRootProps()}\n          >\n            <input {...getInputProps()} />\n            <Intro />\n          </div>\n          <About />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","export const STORAGE_PREFIX = 'couchspinner';\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/browser';\n\nimport './index.scss';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\n// JavaScript error logging\nSentry.init({\n  dsn:\n    'https://dace55ddccfc480083c04f2a876322a3@o356100.ingest.sentry.io/5288459',\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport './components.scss';\n\nexport function Section({ children }) {\n  return <div className=\"Section\">{children}</div>;\n}\n\nexport function Heading({ children }) {\n  return <div className=\"Section-heading\">{children}</div>;\n}\n\nexport function Content(props) {\n  return (\n    <div className=\"Section-content\" {...props}>\n      {props.children}\n    </div>\n  );\n}\n\nexport function Loading({ children }) {\n  return (\n    <Section>\n      <Heading>{children || <span className=\"placeholder\"></span>}</Heading>\n      <Content>\n        <span className=\"placeholder\"></span>\n        <br />\n        <span className=\"placeholder\"></span>\n        <br />\n        <span className=\"placeholder\"></span>\n      </Content>\n    </Section>\n  );\n}\n\nexport function CsProfileLink(props) {\n  const label = props.children || 'Member';\n  return !!props.id ? (\n    <a {...props} href={`https://www.couchsurfing.com/users/${props.id}`}>\n      {props.id === props.userId ? 'You' : label}\n    </a>\n  ) : (\n    <span {...props}>{label}</span>\n  );\n}\n\nexport function CsProfileName(props) {\n  const { id, names, alt, append } = props;\n  const displayName = names ? names.get(id)?.displayName : false;\n\n  return (\n    <>\n      <CsProfileLink id={id} {...props}>\n        {displayName || alt}\n      </CsProfileLink>\n      {displayName && append}\n    </>\n  );\n}\n\nexport function Tabs({ routes }) {\n  return (\n    <ul className=\"Tabs\">\n      {routes.map(({ route, label, count }) => (\n        <li key={route}>\n          <NavLink activeClassName=\"is-active\" to={route}>\n            {label}\n            {!!count && <span className=\"Tab-count\">{count}</span>}\n          </NavLink>\n        </li>\n      ))}\n    </ul>\n  );\n}\n"],"sourceRoot":""}