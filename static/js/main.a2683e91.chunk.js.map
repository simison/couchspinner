{"version":3,"sources":["About.js","sofa.svg","Intro.js","AboutMe.js","Friends.js","Images.js","Raw.js","trustroots-tree.svg","Profile.js","constants.js","App.js","index.js","utils.js","components.js"],"names":["FaqHeading","children","id","className","href","onClick","scrollToElementById","title","About","isDragActive","input","role","aria-hidden","Intro","src","sofa","alt","event","stopPropagation","ProfileContent","profile","interests","about_me","dangerouslySetInnerHTML","__html","marked","map","interest","name","media","teach","amazing_thing","surf_reason","offer_hosts","AboutMe","user","text","document","querySelector","textContent","console","log","CopyToClipboard","format","TrustrootsSearch","search","label","target","rel","FriendList","list","listHasNames","some","displayName","username","classnames","Friends","friends","names","friendIds","friend","parseInt","replace","has","get","unknownFriends","filter","knownFriends","length","Images","images","blobUrl","download","Raw","json","data","Messages","lazy","References","Profile","fileDate","user_data","references","messages","routes","route","count","written_references","received_references","formatDate","first_name","last_name","occupation","window","sessionStorage","clear","error","Sentry","exact","path","fallback","userId","TrustrootsTree","STORAGE_PREFIX","getJsonFromZip","zip","a","files","relativePath","zipEntry","dir","split","pop","file","async","jsonString","JSON","parse","getImagesFromZip","includes","imageProcessor","blob","urlCreator","URL","webkitURL","createObjectURL","Promise","all","extractZip","jszip","loadAsync","getNamesFromJson","Map","collectName","visit","person","surfer","host","display_name","set","couch_visits","host_couch_visits","forEach","surfer_couch_visits","setCacheValue","key","value","setItem","readBlobFile","resolve","reject","fr","FileReader","onload","result","readAsText","scrollTop","body","documentElement","App","isStorageAvailable","testStorage","cachedFileDate","cachedNames","cachedProfile","cachedProfileImages","getItem","loadFromCache","useState","setProfile","profileImages","setProfileImages","setNames","setFileDate","isProcessing","setIsProcessing","useEffect","stringify","onDrop","useCallback","acceptedFiles","alert","type","lastModifiedDate","toString","jsonProfile","useDropzone","getRootProps","getInputProps","dsn","couchspinner_settings","sentry","ReactDOM","render","StrictMode","getElementById","date","dateString","formattedDate","Date","toLocaleDateString","undefined","year","month","day","preventDefault","hash","el","history","pushState","scrollIntoView","behavior","storage","x","removeItem","e","DOMException","code","Section","Heading","Content","props","Loading","CsProfileLink","CsProfileName","append","Tabs","activeClassName","to","Button"],"mappings":"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","file":"static/js/main.a2683e91.chunk.js","sourcesContent":["import React from 'react';\n\nimport { scrollToElementById } from './utils';\nimport './About.css';\n\nfunction FaqHeading({ children, id }) {\n  return (\n    <h3 id={id}>\n      <a\n        className=\"Anchor\"\n        href={`#${id}`}\n        onClick={scrollToElementById}\n        title=\"Link here\"\n      >\n        #\n      </a>\n      {children}\n    </h3>\n  );\n}\n\nfunction About({ isDragActive, input }) {\n  return (\n    <div className=\"App-landing-section About\" id=\"about\">\n      <h1>About</h1>\n\n      <div className=\"About-FAQ\">\n        <FaqHeading id=\"how-can-i-export-my-couchsurfing-profile\">\n          How can I export my CouchSurfing profile?{' '}\n        </FaqHeading>\n        <p>\n          If you can still access your profile,{' '}\n          <a href=\"https://support.couchsurfing.org/hc/en-us/articles/360045738353-Download-your-data\">\n            follow these instructions to download your data\n          </a>\n          .\n        </p>\n        <p>\n          If you cannot access your profile, you can ask for a copy of your data\n          and to delete your account by contacting Couchsurfing Support at{' '}\n          <a href=\"mailto:support@couchsurfing.com\">support@couchsurfing.com</a>{' '}\n          or through{' '}\n          <a href=\"mailto:privacy@couchsurfing.com\">privacy@couchsurfing.com</a>\n          .\n        </p>\n\n        <FaqHeading id=\"why-couchspinner-exists\">\n          Why CouchSpinner exists?\n        </FaqHeading>\n        <p>\n          CouchSurfing locked out a significant portion of their community by{' '}\n          <a href=\"https://blog.couchsurfing.com/couchsurfing-needs-your-help/\">\n            turning into a paid site overnight\n          </a>{' '}\n          on May 14, 2020.\n        </p>\n        <p>\n          You can recover your data from CouchSurfing, but what can you do with\n          it then?\n        </p>\n        <p>\n          With CouchSpinner, you can preview your profile, references, and\n          messages again!\n        </p>\n\n        <FaqHeading id=\"who-made-this\">Who made this?</FaqHeading>\n        <p>\n          Folks behind{' '}\n          <a href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=faq\">\n            Trustroots.org\n          </a>\n          , a free and community-run hospitality exchange site you can use\n          instead of CouchSurfing.\n        </p>\n        <p>\n          We built the functionality anyway for Trustroots and wanted to give it\n          away for everyone.\n        </p>\n        <p>\n          We'd love it if you would also join Trustroots, of course!{' '}\n          <span role=\"img\" aria-hidden>\n            ðŸ™‚\n          </span>\n        </p>\n\n        <FaqHeading id=\"do-you-store-my-couchsurfing-profile\">\n          Do you store my CouchSurfing profile?{' '}\n        </FaqHeading>\n        <p>\n          Nope. Your profile is never uploaded to us â€” we never see it.\n          Everything happens in your browser only. This is completely secure.\n        </p>\n\n        <FaqHeading id=\"it-did-not-work\">It didn't work!</FaqHeading>\n        <p>\n          Oh no!{' '}\n          <a href=\"https://couchspinner.wordpress.com/\">Please get in touch</a>{' '}\n          with Mikael to see if we can help.\n        </p>\n\n        <FaqHeading id=\"couchsurfing-alternatives\">\n          What are other alternatives to CouchSurfing?\n        </FaqHeading>\n        <p>\n          You could check{' '}\n          <a href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=faq\">\n            Trustroots\n          </a>\n          , <a href=\"https://www.bewelcome.org/\">BeWelcome</a>,{' '}\n          <a href=\"https://www.warmshowers.org/\">Warmshowers</a>, and{' '}\n          <a href=\"https://hackercouch.com/\">Hackercouch</a>.\n        </p>\n\n        <FaqHeading id=\"i-see-only-some-names\">\n          I see only some names, but not everyone?\n        </FaqHeading>\n        <p>\n          Most of the Couchsurfing export doesn't contain names of other\n          profiles, only user IDs. There are a few names available from \"couch\n          requests\", which then we can show elsewhere too.\n        </p>\n\n        <FaqHeading id=\"not-all-my-data-is-here\">\n          Not all my data is here!\n        </FaqHeading>\n        <p>\n          Could be! Please check the \"raw\" tab of your profile to see what the\n          file actually contains and what we are showing.\n        </p>\n        <p>\n          The preview doesn't show everything, but also the file from\n          CouchSurfing could be only partial. They've elaborated that{' '}\n          <a href=\"https://www.facebook.com/groups/253525915764545/?post_id=274543140329489&comment_id=274552816995188&reply_comment_id=274560876994382\">\n            some of the very old data might've been lost\n          </a>\n          . You should reach out to CouchSurfing for any specifics, though.\n        </p>\n\n        <FaqHeading id=\"is-this-open-source\">Is this open-source?</FaqHeading>\n        <p>\n          <a href=\"https://github.com/simison/couchspinner\">Yep!</a> Feel free\n          to help out.\n        </p>\n\n        <FaqHeading id=\"friend-profiles-and-images\">\n          Can I download images and profiles of my friends?\n        </FaqHeading>\n        <p>\n          Yes! See the{' '}\n          <a href=\"https://github.com/simison/couchspinner/tree/master/scripts/download\">\n            scripts\n          </a>{' '}\n          that you can use directly from your computer to download your\n          Couchsurfing friend's profiles and images. You also need some\n          technical know-how. ðŸ˜‰\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default About;\n","export default __webpack_public_path__ + \"static/media/sofa.c73c213a.svg\";","import React from 'react';\n\nimport './Intro.scss';\nimport { scrollToElementById } from './utils';\nimport sofa from './sofa.svg';\n\nfunction Intro() {\n  return (\n    <div className=\"App-landing-section Intro\">\n      <h1>CouchSpinner</h1>\n      <h2>\n        Preview Couchsurfing profile export files.{' '}\n        <a href=\"#about\" onClick={scrollToElementById}>\n          Read moreâ€¦\n        </a>\n      </h2>\n      {/* https://www.flaticon.com/free-icon/sofa_2965901?term=sofa&page=1&position=39 */}\n      <img src={sofa} className=\"Intro-logo\" alt=\"logo\" />\n      <button className=\"Intro-instructions\">\n        Drop the file here,\n        <br />\n        or click to select it.\n      </button>\n      <p>\n        <a\n          href=\"#how-can-i-export-my-couchsurfing-profile\"\n          onClick={scrollToElementById}\n        >\n          How do I get CouchSurfing profile export file?\n        </a>\n        <br />\n        <br />\n        <a\n          className=\"Intro-by-link\"\n          onClick={event => event.stopPropagation()}\n          href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=intro\"\n        >\n          By <span>Trustroots.org</span>\n        </a>\n      </p>\n    </div>\n  );\n}\n\nexport default Intro;\n","import CopyToClipboard from 'copy-to-clipboard';\nimport marked from 'marked';\nimport React from 'react';\n// import ReactDOMServer from 'react-dom/server';\n\nimport { Section, Heading, Content, Button } from './components';\nimport './AboutMe.scss';\n\nfunction ProfileContent({ profile, interests }) {\n  if (!profile) {\n    return <p>Your profile looks empty!</p>;\n  }\n\n  return (\n    <>\n      {profile?.about_me && (\n        <span dangerouslySetInnerHTML={{ __html: marked(profile.about_me) }} />\n      )}\n      {profile?.about_me && (\n        <span dangerouslySetInnerHTML={{ __html: marked(profile.about_me) }} />\n      )}\n      {profile?.interests && (\n        <>\n          <p>\n            <strong>More about my interests</strong>\n          </p>\n          <span\n            dangerouslySetInnerHTML={{\n              __html: marked(profile.interests),\n            }}\n          />\n          {interests?.interests && (\n            <ul className=\"AboutMe-interests\">\n              {interests.interests.map(interest => (\n                <li key={interest.name}>{interest.name}</li>\n              ))}\n            </ul>\n          )}\n        </>\n      )}\n      {profile?.media && (\n        <>\n          <p>\n            <strong>My Favorite Music, Movies & Books</strong>\n          </p>\n          <span dangerouslySetInnerHTML={{ __html: marked(profile.media) }} />\n        </>\n      )}\n      {profile?.teach && (\n        <>\n          <p>\n            <strong>Teach, Learn, Share</strong>\n          </p>\n          <span dangerouslySetInnerHTML={{ __html: marked(profile.teach) }} />\n        </>\n      )}\n      {profile?.amazing_thing && (\n        <>\n          <p>\n            <strong>One Amazing Thing I've Done</strong>\n          </p>\n          <span\n            dangerouslySetInnerHTML={{\n              __html: marked(profile.amazing_thing),\n            }}\n          />\n        </>\n      )}\n      {profile?.surf_reason && (\n        <>\n          <p>\n            <strong>Why I'm on Couchsurfing</strong>\n          </p>\n          <span\n            dangerouslySetInnerHTML={{\n              __html: marked(profile.surf_reason),\n            }}\n          />\n        </>\n      )}\n      {profile?.offer_hosts && (\n        <>\n          <p>\n            <strong>What I Can Share With Hosts</strong>\n          </p>\n          <span\n            dangerouslySetInnerHTML={{\n              __html: marked(profile.offer_hosts),\n            }}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nfunction AboutMe({ user, interests }) {\n  const copy = () => {\n    /*\n    // Generate static HTML from React component\n    const profileElement = ProfileContent({profile: user?.profile, interests});\n    const html = ReactDOMServer.renderToString(profileElement);\n\n    // Strip out HTML for copying\n    // @TODO: this losts newlines :-( https://stackoverflow.com/a/50230647\n    // @TODO: can we preserve some HTML and copy-paste that to Trustroots?\n    const div = document.createElement('div');\n    div.innerHTML = html;\n    const text = div.textContent || div.innerText || '';\n    */\n\n    const text = document.querySelector('.Section-content').textContent;\n    console.log('text:', text);\n    CopyToClipboard(text, {\n      format: 'text/plain',\n    });\n  };\n\n  return (\n    <Section>\n      <Heading>\n        About me\n        <Button onClick={copy} className=\"AboutMe-copy\">\n          Copy profile to clipboard\n        </Button>\n      </Heading>\n      <Content>\n        <ProfileContent profile={user?.profile} interests={interests} />\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { Section, Heading, Content, CsProfileLink } from './components';\nimport './Friends.scss';\n\nfunction TrustrootsSearch({ search, label }) {\n  return (\n    search && (\n      <a\n        href={`https://www.trustroots.org/search/members?ref=couchspinner&ref-location=friends&search=${search}`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {label}\n      </a>\n    )\n  );\n}\n\nfunction FriendList({ className, list }) {\n  // Does at least one friend on the list have name or username?\n  const listHasNames = list.some(\n    ({ displayName, username }) => displayName || username,\n  );\n\n  return (\n    <ul className={classnames('Friendist', className)}>\n      {listHasNames && (\n        <li className=\"no-print\">\n          We had their names from couch requests:\n          <strong className=\"Friendlist-tr-label\">\n            Search them on Trustroots:\n          </strong>\n        </li>\n      )}\n      {list.map(({ id, displayName, username }) => {\n        return (\n          <li key={id}>\n            <strong>\n              <CsProfileLink id={id}>\n                {displayName || username || `Member ${id}`}\n                {username && ` (${username})`}\n              </CsProfileLink>\n            </strong>\n            {(displayName || username) && (\n              <span className=\"Friendlist-tr no-print\">\n                <span className=\"Friendlist-tr-label\">\n                  Search on Trustroots{' '}\n                </span>\n                {displayName && (\n                  <TrustrootsSearch search={displayName} label=\"by name\" />\n                )}\n                {displayName && username && ' or '}\n                {username && (\n                  <TrustrootsSearch search={username} label=\"by username\" />\n                )}\n              </span>\n            )}\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nfunction Friends({ friends, names }) {\n  const friendIds = friends.map(friend => {\n    const id = parseInt(\n      friend.profile.replace('https://www.couchsurfing.com/users/', ''),\n      10,\n    );\n    const { displayName, username } = names.has(id) ? names.get(id) : {};\n    return {\n      displayName,\n      id,\n      username,\n    };\n  });\n\n  const unknownFriends = friendIds.filter(({ displayName }) => !displayName);\n  const knownFriends = friendIds.filter(({ displayName }) => displayName);\n\n  return (\n    <Section>\n      <Heading>Friends</Heading>\n      <Content>\n        {!friendIds.length === 0 && <p>No friends. :-(</p>}\n        {knownFriends.length > 0 && (\n          <>\n            <h3>Known friends</h3>\n            <FriendList className=\"Friendlist-known\" list={knownFriends} />\n          </>\n        )}\n        {unknownFriends.length > 0 && (\n          <>\n            <h3>Unknown friends</h3>\n            <p>\n              Your export file does not have names for these members.\n              <br />\n              <span className=\"no-print\">\n                Some of their profiles might be public so you could try see whom\n                they are.\n              </span>\n            </p>\n            <FriendList className=\"Friendlist-unknown\" list={unknownFriends} />\n          </>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default Friends;\n","import React from 'react';\n\nimport { Content, Section, Heading } from './components';\nimport './Images.css';\n\nfunction Images({ images }) {\n  return (\n    <Section>\n      <Heading>Images</Heading>\n      <Content>\n        {images.length ? (\n          images.map(({ id, blobUrl }) => (\n            <p key={id}>\n              <a href={blobUrl} download={id}>\n                <img src={blobUrl} alt=\"\" className=\"Image\" />\n              </a>\n            </p>\n          ))\n        ) : (\n          <p>You had no imagesâ€¦ :-(</p>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default Images;\n","import React from 'react';\nimport JsonTree from 'react-json-tree';\n\nimport { Section, Heading } from './components';\n\nfunction Raw({ json }) {\n  return (\n    <Section>\n      <Heading>Raw profile export</Heading>\n      <JsonTree data={json} />\n    </Section>\n  );\n}\n\nexport default Raw;\n","export default __webpack_public_path__ + \"static/media/trustroots-tree.b1f8bf95.svg\";","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport * as Sentry from '@sentry/browser';\nimport React, { Suspense, lazy } from 'react';\n\nimport './Profile.scss';\nimport { formatDate } from './utils';\nimport { Section, CsProfileLink, Tabs, Loading, Button } from './components';\nimport AboutMe from './AboutMe';\nimport Friends from './Friends';\nimport Images from './Images';\nimport Raw from './Raw';\nimport TrustrootsTree from './trustroots-tree.svg';\n\n// Slow rendering elements\nconst Messages = lazy(() => import('./Messages'));\nconst References = lazy(() => import('./References'));\n\nfunction Profile({ fileDate, images, names, profile }) {\n  const { user_data: user, interests, references, friends, messages } = profile;\n\n  const referencesCount =\n    (references?.written_references?.length ?? 0) +\n    (references?.received_references?.length ?? 0);\n  const friendsCount = friends?.friends?.length ?? 0;\n  const messagesCount = messages?.messages?.length ?? 0;\n  const imagesCount = images?.length ?? 0;\n  const routes = [\n    { route: '/', label: 'About me' },\n    { route: '/references', label: 'References', count: referencesCount },\n    { route: '/friends', label: 'Friends', count: friendsCount },\n    { route: '/messages', label: 'Messages', count: messagesCount },\n    { route: '/images', label: 'Images', count: imagesCount },\n    { route: '/raw', label: 'Raw' },\n  ];\n\n  const clearSessionStorage = () => {\n    try {\n      window.sessionStorage.clear();\n    } catch (error) {\n      Sentry.captureException(error);\n      console.error(error);\n    }\n  };\n\n  return (\n    <Router>\n      <div className=\"Profile\">\n        <div className=\"Profile-header\">\n          <div>\n            <em>\n              <CsProfileLink id={user?.id}>\n                Your Couchsurfing.com profile\n              </CsProfileLink>\n              {fileDate && ` as of ${formatDate(fileDate)}`}\n            </em>\n            <h1>\n              {user?.profile?.first_name && `${user.profile.first_name} `}\n              {user?.profile?.last_name && `${user.profile.last_name} `}\n              {user?.username && `(${user.username})`}\n            </h1>\n            {user?.profile?.occupation && <h3>{user.profile.occupation}</h3>}\n          </div>\n          <div className=\"Profile-buttons\">\n            <Button\n              href=\"/\"\n              className=\"Profile-clear\"\n              onClick={clearSessionStorage}\n            >\n              Clear out the profile\n            </Button>\n            <Button\n              href=\"https://www.trustroots.org/signup?ref=couchspinner&ref-location=header\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Sign up Trustroots.org\n            </Button>\n          </div>\n        </div>\n\n        <Section>\n          <Tabs routes={routes} />\n        </Section>\n\n        <Switch>\n          <Route exact path=\"/\">\n            <AboutMe user={user} interests={interests} />\n          </Route>\n          <Route path=\"/references\">\n            <Suspense fallback={<Loading>References</Loading>}>\n              <References\n                names={names}\n                references={references}\n                userId={user?.id}\n              />\n            </Suspense>\n          </Route>\n          <Route path=\"/friends\">\n            <Friends names={names} friends={friends?.friends || []} />\n          </Route>\n          <Route path=\"/messages\">\n            <Suspense fallback={<Loading>Messages</Loading>}>\n              <Messages\n                messages={messages?.messages || []}\n                names={names}\n                userId={user?.id}\n              />\n            </Suspense>\n          </Route>\n          <Route path=\"/images\">\n            <Images images={images} />\n          </Route>\n          <Route path=\"/raw\">\n            <Raw json={profile} />\n          </Route>\n        </Switch>\n\n        <div className=\"promo\">\n          <a\n            href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=footer\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <img src={TrustrootsTree} className=\"tr-logo\" alt=\"Trustroots\" />\n            <br />\n            Join Trustroots.org\n            <br />\n            Travellers hospitality community.\n          </a>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default Profile;\n","export const STORAGE_PREFIX = 'couchspinner';\n","import { useDropzone } from 'react-dropzone';\nimport * as Sentry from '@sentry/browser';\nimport classnames from 'classnames';\nimport jszip from 'jszip';\nimport React, { useCallback, useState, useEffect } from 'react';\n\nimport './App.scss';\nimport About from './About';\nimport Intro from './Intro';\nimport Profile from './Profile';\nimport { testStorage } from './utils';\nimport { STORAGE_PREFIX } from './constants';\n// import example from './example-profile.json';\nconst EXAMPLE_PROFILE = '';\n\nasync function getJsonFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return !zipEntry.dir && zipEntry.name.split('.').pop() === 'json';\n  });\n\n  if (!files.length) {\n    return false;\n  }\n\n  const jsonString = await zip.file(files[0].name).async('string');\n\n  try {\n    const json = JSON.parse(jsonString);\n    return json;\n  } catch (error) {\n    Sentry.captureException(error);\n    return false;\n  }\n}\n\nasync function getImagesFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return (\n      !zipEntry.dir &&\n      ['jpg', 'gif', 'png'].includes(zipEntry.name.split('.').pop())\n    );\n  });\n\n  const imageProcessor = files.map(async file => {\n    const blob = await zip.file(file.name).async('blob');\n    const urlCreator = window.URL || window.webkitURL;\n    const blobUrl = urlCreator.createObjectURL(blob);\n\n    return {\n      blobUrl,\n      id: file.name,\n    };\n  });\n\n  const images = await Promise.all(imageProcessor);\n\n  return images;\n}\n\nasync function extractZip(file) {\n  const zip = await jszip.loadAsync(file);\n  const json = await getJsonFromZip(zip);\n  const images = await getImagesFromZip(zip);\n\n  return {\n    images,\n    json,\n  };\n}\n\nfunction getNamesFromJson(json) {\n  const names = new Map();\n\n  const collectName = visit => {\n    const person = visit?.surfer || visit?.host || {};\n    const username = person?.username;\n    const id = person?.profile?.id;\n    const displayName = person?.profile?.display_name;\n    names.set(id, { displayName, username });\n  };\n\n  if (json?.couch_visits?.host_couch_visits) {\n    json.couch_visits.host_couch_visits.forEach(collectName);\n  }\n\n  if (json?.couch_visits?.surfer_couch_visits) {\n    json.couch_visits.surfer_couch_visits.forEach(collectName);\n  }\n\n  return names;\n}\n\nfunction setCacheValue(key, value) {\n  try {\n    window.sessionStorage.setItem(`${STORAGE_PREFIX}_${key}`, value);\n  } catch (error) {\n    Sentry.captureException(error);\n    console.error(`Saving ${key} in cache failed:`, error);\n  }\n}\n\n/**\n * Read file from Blob or File entry\n * @param  {[File|Blob]}\n * @return {[String]} Text contents of the File\n */\nfunction readBlobFile(file) {\n  // Browser supports Blob.text(), all good!\n  // https://developer.mozilla.org/en-US/docs/Web/API/Blob/text\n  if (typeof file.text === 'function') {\n    return file.text();\n  }\n\n  // Namely Safari needs this\n  // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsText\n  // https://stackoverflow.com/a/46568146\n  return new Promise((resolve, reject) => {\n    var fr = new FileReader();\n    fr.onload = () => {\n      resolve(fr.result);\n    };\n    fr.readAsText(file);\n  });\n}\n\n/**\n * Load previously cached items\n * @return {[Object]}\n */\nfunction loadFromCache() {\n  let cachedFileDate;\n  let cachedNames;\n  let cachedProfile;\n  let cachedProfileImages;\n  try {\n    cachedFileDate = window.sessionStorage.getItem(\n      `${STORAGE_PREFIX}_file_date`,\n    );\n    cachedProfile = JSON.parse(\n      window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile`),\n    );\n    cachedProfileImages = JSON.parse(\n      window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile_images`),\n    );\n\n    if (cachedProfile) {\n      cachedNames = getNamesFromJson(cachedProfile);\n    }\n  } catch (error) {\n    Sentry.captureException(error);\n    console.error(error);\n  }\n\n  return {\n    cachedFileDate,\n    cachedNames,\n    cachedProfile,\n    cachedProfileImages,\n  };\n}\n\nfunction scrollTop() {\n  document.body.scrollTop = 0; // For Safari\n  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\n}\n\nfunction App() {\n  const isStorageAvailable = testStorage('sessionStorage');\n\n  const {\n    cachedFileDate,\n    cachedNames,\n    cachedProfile,\n    cachedProfileImages,\n  } = isStorageAvailable ? loadFromCache() : {};\n\n  const [profile, setProfile] = useState(cachedProfile || EXAMPLE_PROFILE);\n  const [profileImages, setProfileImages] = useState(cachedProfileImages || []);\n  const [names, setNames] = useState(cachedNames || new Map());\n  const [fileDate, setFileDate] = useState(cachedFileDate || '');\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Store for the browser session â€” gets cleared out when closing tab but not on page refresh\n  useEffect(() => {\n    if (isStorageAvailable) {\n      setCacheValue('file_date', fileDate);\n      setCacheValue('profile_images', JSON.stringify(profileImages));\n      setCacheValue('profile', JSON.stringify(profile));\n    }\n  }, [isStorageAvailable, profile, profileImages, fileDate]);\n\n  // On uploading file(s)\n  const onDrop = useCallback(async acceptedFiles => {\n    setIsProcessing(true);\n\n    if (!acceptedFiles || acceptedFiles.length === 0) {\n      setIsProcessing(false);\n      return alert('No files? ðŸ˜¥');\n    }\n\n    if (acceptedFiles.length !== 1) {\n      setIsProcessing(false);\n      return alert('Just one file please.');\n    }\n\n    const file = acceptedFiles[0];\n\n    if (!['application/zip', 'application/json'].includes(file.type)) {\n      setIsProcessing(false);\n      return alert(\n        'Please drop either the zip file or json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"',\n      );\n    }\n\n    if (file.lastModifiedDate) {\n      setFileDate(file.lastModifiedDate.toString());\n    }\n\n    if (file.type === 'application/zip') {\n      const { json, images } = await extractZip(file);\n      if (!json) {\n        setIsProcessing(false);\n        return alert(\n          'Please drop a zip file which contains the profile json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"',\n        );\n      }\n\n      const names = getNamesFromJson(json);\n      setProfile(json);\n      setNames(names);\n      setProfileImages(images);\n      scrollTop();\n    } else if (file.type === 'application/json') {\n      const jsonProfile = await readBlobFile(file);\n\n      try {\n        const json = JSON.parse(jsonProfile);\n        const names = getNamesFromJson(json);\n        setProfile(json);\n        setNames(names);\n        scrollTop();\n      } catch (error) {\n        Sentry.captureException(error);\n        console.error(error);\n        alert(\n          'File is little too funky for us to understandâ€¦  ðŸ˜¥\\n\\nMake sure you uploaded correct export file (it should be .json or .zip file).\\n\\nIf problem persists, feel free to get in touch with Mikael (https://mikaelkorpela.fi/#contact).',\n        );\n      }\n    }\n\n    setIsProcessing(false);\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  return (\n    <div className={classnames('App', { 'is-processing': isProcessing })}>\n      {profile ? (\n        <Profile\n          fileDate={fileDate}\n          images={profileImages}\n          names={names}\n          profile={profile}\n        />\n      ) : (\n        <>\n          <div\n            className={classnames('drop-container', {\n              'is-dropping': isDragActive,\n            })}\n            {...getRootProps()}\n          >\n            <input {...getInputProps()} />\n            <Intro />\n          </div>\n          <About />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/browser';\n\nimport './index.scss';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\n// JavaScript error logging\nSentry.init({\n  dsn: window.couchspinner_settings?.sentry || '',\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","/**\n * Give out pretty date\n *\n * @param  {String|Date object} date Date as a string or Date object\n * @return {String}\n */\nexport function formatDate(date) {\n  if (!date) {\n    return date;\n  }\n\n  let dateString;\n\n  // Dates on CS exports are in format \"2007-01-11 22:29:44 UTC\"\n  if (typeof date !== 'object') {\n    dateString = date.replace(' UTC', '');\n  }\n\n  const formattedDate = new Date(dateString).toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n\n  return formattedDate && formattedDate !== 'Invalid Date'\n    ? formattedDate\n    : date;\n}\n\nexport const scrollToElementById = event => {\n  event.stopPropagation();\n  event.preventDefault();\n  const hash = event?.target?.hash;\n  if (hash) {\n    const el = document.getElementById(hash.replace('#', ''));\n    if (el) {\n      window.history.pushState({}, '', hash);\n      el.scrollIntoView({\n        behavior: 'smooth',\n      });\n    }\n  }\n};\n\n/**\n * Test if browser supports sessionStorage or localStorage\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n *\n * @param  {[String]} type Either `sessionStorage` or `localStorage`\n * @return {[Boolean]}\n */\nexport function testStorage(type) {\n  var storage;\n  try {\n    storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return (\n      e instanceof DOMException &&\n      // everything except Firefox\n      (e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage &&\n      storage.length !== 0\n    );\n  }\n}\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport './components.scss';\n\nexport function Section({ children }) {\n  return <div className=\"Section\">{children}</div>;\n}\n\nexport function Heading({ children }) {\n  return <div className=\"Section-heading\">{children}</div>;\n}\n\nexport function Content(props) {\n  return (\n    <div className=\"Section-content\" {...props}>\n      {props.children}\n    </div>\n  );\n}\n\nexport function Loading({ children }) {\n  return (\n    <Section>\n      <Heading>{children || <span className=\"placeholder\"></span>}</Heading>\n      <Content>\n        <span className=\"placeholder\"></span>\n        <br />\n        <span className=\"placeholder\"></span>\n        <br />\n        <span className=\"placeholder\"></span>\n      </Content>\n    </Section>\n  );\n}\n\nexport function CsProfileLink(props) {\n  const label = props.children || 'Member';\n  return !!props.id ? (\n    <a {...props} href={`https://www.couchsurfing.com/users/${props.id}`}>\n      {props.id === props.userId ? 'You' : label}\n    </a>\n  ) : (\n    <span {...props}>{label}</span>\n  );\n}\n\nexport function CsProfileName(props) {\n  const { id, names, alt, append } = props;\n  const displayName = names ? names.get(id)?.displayName : false;\n\n  return (\n    <>\n      <CsProfileLink id={id} {...props}>\n        {displayName || alt}\n      </CsProfileLink>\n      {displayName && append}\n    </>\n  );\n}\n\nexport function Tabs({ routes }) {\n  return (\n    <ul className=\"Tabs\">\n      {routes.map(({ route, label, count }) => (\n        <li key={route}>\n          <NavLink activeClassName=\"is-active\" to={route}>\n            {label}\n            {!!count && <span className=\"Tab-count\">{count}</span>}\n          </NavLink>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport function Button(props) {\n  return props.href ? (\n    <a {...props} className={`Button ${props.className}`}>\n      {props.children}\n    </a>\n  ) : (\n    <button {...props} className={`Button ${props.className}`}>\n      {props.children}\n    </button>\n  );\n}\n"],"sourceRoot":""}